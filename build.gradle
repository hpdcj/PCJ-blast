apply plugin: 'java'
apply from: 'jaxb.gradle'

sourceCompatibility = '1.8'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
//compileJava.options.compilerArgs.add '-Xlint:unchecked'

repositories {
}

dependencies {
    compile files('../PCJ-ant/dist/PCJ-ant.jar')
}

jaxb {    
    inputs.file "src/main/resources/dtd/NCBI_BlastOutput.dtd!ncbi.blast.result.generated"
    outputs.dir "${buildDir}/generated-src/"
}
    
compileJava {
    dependsOn jaxb
    source jaxb.outputs.files
}

sourceSets {
    main {
        java {
            srcDirs += [file("${buildDir}/generated-src/")]
        }
    }
}

if (!hasProperty('mainClass')) {
    ext.mainClass = 'org.pcj.blast.Main'
}

jar {
    manifest {
        attributes 'Main-Class': 'org.pcj.blast.Main'
    }
}